{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport { perPage, refs } from '../main';\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport async function getArticle(query, currentPage) {\n  const params = {\n    key: '44418874-6a40f19281481af9f7a412a08',\n    q: query,\n    page: currentPage,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: perPage,\n    order: 'popular',\n  };\n  const result = await axios.get('/api/', { params });\n  console.log(result.data);\n  return result.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { currentPage, maxPage, refs } from '../main';\nimport iziToast from 'izitoast';\n\nconst lightbox = new SimpleLightbox('.gallery li', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function marcupImage(images) {\n  const marcup = images\n    .map(image => {\n      return `<li class=\"gallery-item\"\n      <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img\n      width=360;\n      height=200;\n      class=\"gallery-image\"\n      src=\"${image.webformatURL}\"\n      alt=\"${image.tags} \" />\n          <div class=\"image-info\">\n               <p>LIKES: ${image.likes}</p>\n                    <p>VIEWS: ${image.views}</p>\n                    <p>COMMENTS: ${image.comments}</p>\n                    <p>DOWNLOADS: ${image.downloads}</p>\n                </div>\n            </a>\n            </li>\n        `;\n    })\n    .join('');\n  return marcup;\n  lightbox.refresh();\n}\nexport function showLoader() {\n  refs.loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  refs.loader.classList.add('hidden');\n}\nexport function formReset() {\n  refs.formSearch.reset();\n}\nexport function showLoadBtn() {\n  refs.loadBtn.classList.remove('hidden');\n}\nexport function hideLoadBtn() {\n  refs.loadBtn.classList.add('hidden');\n}\n\nexport function scrollGallery() {\n  const liElem = refs.imgGallery.children[0];\n  const height = liElem.getBoundingClientRect().height;\n  scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\nexport function updateLoadBtnStatus() {\n  if (currentPage >= maxPage) {\n    hideLoadBtn();\n    if (maxPage) {\n      showError(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } else {\n    showLoadBtn();\n  }\n}\nexport function showError(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    layout: 2,\n    position: 'topRight',\n    displayMode: 'once',\n  });\n}\n","import { getArticle } from './js/pixabay-api.js';\nimport {\n  marcupImage,\n  showLoader,\n  hideLoader,\n  showLoadBtn,\n  updateLoadBtnStatus,\n  hideLoadBtn,\n  formReset,\n  showError,\n  scrollGallery,\n} from './js/render-function.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const refs = {\n  formSearch: document.querySelector('#search'),\n  inputImgSearch: document.querySelector('.input-img-search'),\n  imgGallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadBtn: document.querySelector('.load-btn'),\n};\nlet query;\nexport let currentPage = 1;\nexport let maxPage;\nexport const perPage = 15;\n\nrefs.formSearch.addEventListener('submit', async event => {\n  event.preventDefault();\n  query = event.target.elements.search.value.trim();\n\n  if (!query) {\n    refs.imgGallery.innerHTML = ' ';\n    iziToast.warning({\n      title: 'warning',\n      message: ' Enter a word for the query, please.',\n      layout: 2,\n      position: 'topRight',\n      displayMode: 'once',\n    });\n    return;\n  }\n  showLoader();\n  hideLoadBtn();\n  currentPage = 1;\n  try {\n    const data = await getArticle(query, currentPage);\n    maxPage = Math.ceil(data.totalHits / perPage);\n    console.log(maxPage);\n\n    if (maxPage === 0) {\n      showError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      hideLoader();\n      updateLoadBtnStatus();\n      return;\n      formReset();\n    }\n    const marcup = marcupImage(data.hits);\n    refs.imgGallery.insertAdjacentHTML('beforeend', marcup);\n\n    console.log(data.hits);\n  } catch (error) {\n    console.log(error);\n  }\n  hideLoader();\n  updateLoadBtnStatus();\n  formReset();\n});\n\nrefs.loadBtn.addEventListener('click', async event => {\n  currentPage++;\n  hideLoadBtn();\n  showLoader();\n  try {\n    const data = await getArticle(query, currentPage);\n    const marcup = marcupImage(data.hits);\n    refs.imgGallery.insertAdjacentHTML('beforeend', marcup);\n    scrollGallery();\n  } catch (error) {\n    console.log(error);\n  }\n  hideLoader();\n  updateLoadBtnStatus();\n});\n"],"names":["axios","getArticle","query","currentPage","params","perPage","result","SimpleLightbox","marcupImage","images","image","showLoader","refs","hideLoader","formReset","showLoadBtn","hideLoadBtn","scrollGallery","height","updateLoadBtnStatus","maxPage","showError","message","iziToast","event","data","marcup","error"],"mappings":"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"}