{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport { perPage, refs } from '../main';\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport async function getArticle(query, currentPage) {\n  const params = {\n    key: '44418874-6a40f19281481af9f7a412a08',\n    q: query,\n    page: currentPage,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: perPage,\n    order: 'popular',\n  };\n  const result = await axios.get('/api/', { params });\n  return result.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { currentPage, maxPage, refs } from '../main';\nimport iziToast from 'izitoast';\n\nlet lightbox = new SimpleLightbox('.gallery li', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nexport function marcupImage(images) {\n  const marcup = images\n    .map(image => {\n      return `<li class=\"gallery-item\"\n      <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img\n      width=360;\n      height=200;\n      class=\"gallery-image\"\n      src=\"${image.webformatURL}\"\n      alt=\"${image.tags} \" />\n          <div class=\"image-info\">\n               <p>LIKES: ${image.likes}</p>\n                    <p>VIEWS: ${image.views}</p>\n                    <p>COMMENTS: ${image.comments}</p>\n                    <p>DOWNLOADS: ${image.downloads}</p>\n                </div>\n            </a>\n            </li>\n        `;\n    })\n    .join('');\n  refs.imgGallery.insertAdjacentHTML('beforeend', marcup);\n  lightbox.refresh();\n  // return marcup;\n}\nexport function showLoader() {\n  refs.loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  refs.loader.classList.add('hidden');\n}\nexport function formReset() {\n  refs.formSearch.reset();\n}\nexport function showLoadBtn() {\n  refs.loadBtn.classList.remove('hidden');\n}\nexport function hideLoadBtn() {\n  refs.loadBtn.classList.add('hidden');\n}\n\nexport function scrollGallery() {\n  const liElem = refs.imgGallery.children[0];\n  const height = liElem.getBoundingClientRect().height;\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n\nexport function updateLoadBtnStatus() {\n  if (currentPage >= maxPage) {\n    hideLoadBtn();\n    if (maxPage) {\n      showError(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } else {\n    showLoadBtn();\n  }\n}\n\nexport function showError(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    layout: 2,\n    position: 'topRight',\n    displayMode: 'once',\n  });\n}\n","import { getArticle } from './js/pixabay-api.js';\nimport {\n  marcupImage,\n  showLoader,\n  hideLoader,\n  showLoadBtn,\n  updateLoadBtnStatus,\n  hideLoadBtn,\n  formReset,\n  showError,\n  scrollGallery,\n} from './js/render-function.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nexport const refs = {\n  formSearch: document.querySelector('#search'),\n  inputImgSearch: document.querySelector('.input-img-search'),\n  imgGallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadBtn: document.querySelector('.load-btn'),\n};\n\nlet query;\nexport let currentPage = 1;\nexport let maxPage;\nexport const perPage = 15;\n\nrefs.formSearch.addEventListener('submit', async event => {\n  event.preventDefault();\n  query = event.target.elements.search.value.trim();\n  refs.imgGallery.innerHTML = '';\n  if (query === '') {\n    hideLoadBtn();\n    iziToast.warning({\n      title: 'warning',\n      message: ' Enter a word for the query, please.',\n      layout: 2,\n      position: 'topRight',\n      displayMode: 'once',\n    });\n    hideLoader();\n    formReset();\n    return;\n  }\n  showLoader();\n  hideLoadBtn();\n  currentPage = 1;\n  try {\n    const data = await getArticle(query, currentPage);\n    maxPage = Math.ceil(data.totalHits / perPage);\n    if (maxPage === 0) {\n      showError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      hideLoader();\n      formReset();\n      updateLoadBtnStatus();\n      return;\n    }\n    const marcup = marcupImage(data.hits);\n    formReset();\n  } catch (error) {\n    console.log(error);\n  }\n  hideLoader();\n  updateLoadBtnStatus();\n  formReset();\n});\n\nrefs.loadBtn.addEventListener('click', async event => {\n  currentPage++;\n  hideLoadBtn();\n  showLoader();\n  try {\n    const data = await getArticle(query, currentPage);\n    const marcup = marcupImage(data.hits);\n    scrollGallery();\n  } catch (error) {\n    console.log(error);\n  }\n  hideLoader();\n  updateLoadBtnStatus();\n});\n"],"names":["axios","getArticle","query","currentPage","params","perPage","lightbox","SimpleLightbox","marcupImage","images","marcup","image","refs","showLoader","hideLoader","formReset","showLoadBtn","hideLoadBtn","scrollGallery","height","updateLoadBtnStatus","maxPage","showError","message","iziToast","event","data","error"],"mappings":"owBAEAA,EAAM,SAAS,QAAU,sBAElB,eAAeC,EAAWC,EAAOC,EAAa,CACnD,MAAMC,EAAS,CACb,IAAK,qCACL,EAAGF,EACH,KAAMC,EACN,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUE,EACV,MAAO,SACX,EAEE,OADe,MAAML,EAAM,IAAI,QAAS,CAAE,OAAAI,CAAM,CAAE,GACpC,IAChB,CCZA,IAAIE,EAAW,IAAIC,EAAe,cAAe,CAC/C,aAAc,MACd,aAAc,GAChB,CAAC,EACM,SAASC,EAAYC,EAAQ,CAClC,MAAMC,EAASD,EACZ,IAAIE,GACI;AAAA,sCACyBA,EAAM,aAAa;AAAA;AAAA;AAAA;AAAA;AAAA,aAK5CA,EAAM,YAAY;AAAA,aAClBA,EAAM,IAAI;AAAA;AAAA,2BAEIA,EAAM,KAAK;AAAA,gCACNA,EAAM,KAAK;AAAA,mCACRA,EAAM,QAAQ;AAAA,oCACbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,SAK9C,EACA,KAAK,EAAE,EACVC,EAAK,WAAW,mBAAmB,YAAaF,CAAM,EACtDJ,EAAS,QAAO,CAElB,CACO,SAASO,GAAa,CAC3BD,EAAK,OAAO,UAAU,OAAO,QAAQ,CACvC,CAEO,SAASE,GAAa,CAC3BF,EAAK,OAAO,UAAU,IAAI,QAAQ,CACpC,CACO,SAASG,GAAY,CAC1BH,EAAK,WAAW,OAClB,CACO,SAASI,GAAc,CAC5BJ,EAAK,QAAQ,UAAU,OAAO,QAAQ,CACxC,CACO,SAASK,GAAc,CAC5BL,EAAK,QAAQ,UAAU,IAAI,QAAQ,CACrC,CAEO,SAASM,GAAgB,CAE9B,MAAMC,EADSP,EAAK,WAAW,SAAS,CAAC,EACnB,sBAAqB,EAAG,OAC9C,OAAO,SAAS,CACd,IAAKO,EAAS,EACd,SAAU,QACd,CAAG,CACH,CAEO,SAASC,GAAsB,CAChCjB,GAAekB,GACjBJ,IACII,GACFC,EAAU,4DAA4D,GAGxEN,GAEJ,CAEO,SAASM,EAAUC,EAAS,CACjCC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,EACT,OAAQ,EACR,SAAU,WACV,YAAa,MACjB,CAAG,CACH,CClEO,MAAMX,EAAO,CAClB,WAAY,SAAS,cAAc,SAAS,EAC5C,eAAgB,SAAS,cAAc,mBAAmB,EAC1D,WAAY,SAAS,cAAc,UAAU,EAC7C,OAAQ,SAAS,cAAc,SAAS,EACxC,QAAS,SAAS,cAAc,WAAW,CAC7C,EAEA,IAAIV,EACOC,EAAc,EACdkB,EACJ,MAAMhB,EAAU,GAEvBO,EAAK,WAAW,iBAAiB,SAAU,MAAMa,GAAS,CAIxD,GAHAA,EAAM,eAAc,EACpBvB,EAAQuB,EAAM,OAAO,SAAS,OAAO,MAAM,OAC3Cb,EAAK,WAAW,UAAY,GACxBV,IAAU,GAAI,CAChBe,IACAO,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,uCACT,OAAQ,EACR,SAAU,WACV,YAAa,MACnB,CAAK,EACDV,IACAC,IACA,MACD,CACDF,IACAI,IACAd,EAAc,EACd,GAAI,CACF,MAAMuB,EAAO,MAAMzB,EAAWC,EAAOC,CAAW,EAEhD,GADAkB,EAAU,KAAK,KAAKK,EAAK,UAAYrB,CAAO,EACxCgB,IAAY,EAAG,CACjBC,EACE,0EACR,EACMR,IACAC,IACAK,IACA,MACD,CACD,MAAMV,EAASF,EAAYkB,EAAK,IAAI,EACpCX,GACD,OAAQY,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACDb,IACAM,IACAL,GACF,CAAC,EAEDH,EAAK,QAAQ,iBAAiB,QAAS,MAAMa,GAAS,CACpDtB,IACAc,IACAJ,IACA,GAAI,CACF,MAAMa,EAAO,MAAMzB,EAAWC,EAAOC,CAAW,EAC1CO,EAASF,EAAYkB,EAAK,IAAI,EACpCR,GACD,OAAQS,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACDb,IACAM,GACF,CAAC"}